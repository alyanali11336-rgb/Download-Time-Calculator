<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Network & GB Calculator</title>
    <style>
        :root { --primary: #6366f1; --success: #22c55e; --bg: #f8fafc; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); display: flex; justify-content: center; padding: 20px; }
        .container { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); width: 100%; max-width: 450px; }
        .network-card { background: #f1f5f9; padding: 15px; border-radius: 12px; margin-bottom: 20px; font-size: 13px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .stat { color: #475569; }
        .stat b { color: var(--primary); }
        .mode-switch { margin-bottom: 20px; display: flex; gap: 10px; }
        .mode-btn { flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; background: white; font-weight: bold; }
        .mode-btn.active { background: var(--primary); color: white; border-color: var(--primary); }
        input { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 10px; box-sizing: border-box; font-size: 16px; margin-top: 8px; }
        .result-area { margin-top: 20px; padding: 20px; background: #ecfdf5; border-radius: 12px; text-align: center; }
        #time-result { font-size: 28px; font-weight: 800; color: var(--success); display: block; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="margin-top:0">üåê Pro Net Calculator</h2>

    <div class="network-card">
        <div class="stat">Type: <b id="net-type">-</b></div>
        <div class="stat">Ping (RTT): <b id="net-ping">-</b> ms</div>
        <div class="stat">Downlink: <b id="net-down">-</b> Mbps</div>
        <div class="stat">Data Saver: <b id="net-save">-</b></div>
    </div>

    <div class="mode-switch">
        <button class="mode-btn active" onclick="setMode('download', this)">Download</button>
        <button class="mode-btn" onclick="setMode('upload', this)">Upload</button>
    </div>

    <div style="margin-bottom: 15px;">
        <label id="input-label">File Size (GB):</label>
        <input type="number" id="fileSize" placeholder="Enter size in GB" oninput="calculateAll()">
    </div>

    <div style="margin-bottom: 15px;" id="manual-speed-div">
        <label>Speed (Mbps):</label>
        <input type="number" id="customSpeed" placeholder="Auto-detecting..." oninput="calculateAll()">
        <small style="color: #94a3b8;">* Leave blank to use auto-detected speed</small>
    </div>

    <div class="result-area">
        <span style="font-size: 14px; color: #64748b;" id="result-label">Estimated Download Time</span>
        <span id="time-result">0d 0h 0m 0s</span>
    </div>
</div>

<script>
    let currentMode = 'download';

    function setMode(mode, btn) {
        currentMode = mode;
        // Button UI toggle
        document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        // Label updates
        document.getElementById('result-label').innerText = `Estimated ${mode.charAt(0).toUpperCase() + mode.slice(1)} Time`;
        calculateAll();
    }

    function updateNetworkStats() {
        if (navigator.connection) {
            const conn = navigator.connection;
            document.getElementById('net-type').innerText = conn.effectiveType.toUpperCase();
            document.getElementById('net-ping').innerText = conn.rtt;
            document.getElementById('net-down').innerText = conn.downlink;
            document.getElementById('net-save').innerText = conn.saveData ? "ON" : "OFF";
            
            // Auto-fill speed if manual is empty
            if (!document.getElementById('customSpeed').value) {
                calculateAll();
            }
        }
    }

    function calculateAll() {
        let size = document.getElementById('fileSize').value;
        let manualSpeed = document.getElementById('customSpeed').value;
        let autoSpeed = navigator.connection ? navigator.connection.downlink : 0;
        
        let speed = (manualSpeed > 0) ? manualSpeed : autoSpeed;
        let display = document.getElementById('time-result');

        if (size > 0 && speed > 0) {
            let totalMegabits = size * 1024 * 8;
            let seconds = totalMegabits / speed;

            let d = Math.floor(seconds / 86400);
            let h = Math.floor((seconds % 86400) / 3600);
            let m = Math.floor((seconds % 3600) / 60);
            let s = Math.round(seconds % 60);

            display.innerText = `${d}d ${h}h ${m}m ${s}s`;
        } else {
            display.innerText = "0d 0h 0m 0s";
        }
    }

    // Har 2 seconds baad network info update hogi
    setInterval(updateNetworkStats, 2000);
    window.onload = updateNetworkStats;
</script>

</body>
</html>
